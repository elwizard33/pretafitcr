---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import CountdownTimer from '../components/CountdownTimer.astro';
import Disciplines from '../components/sections/Disciplines.astro';
import Instructor from '../components/sections/Instructor.astro';
import PlansCrossFit from '../components/sections/PlansCrossFit.astro';
import Hero from '../components/sections/Hero.astro';
import Reviews from '../components/sections/Reviews.astro';
import FAQ from 'src/components/sections/FAQ.astro';
import Location from '../components/sections/Location.astro';
import { getValidatedReviews } from '../data/reviews';

// Get nonce from Astro.locals for CSP compliance  
// @ts-ignore
const nonce = Astro.locals?.nonce;

// Get reviews for structured data
const reviews = getValidatedReviews();

const seo = {
  title: "Preta Fit Jac√≥ | CrossFit ¬∑ BJJ ¬∑ Wellness",
  description: "Entrenamientos de CrossFit, Brazilian Jiu-Jitsu, fuerza y bienestar en Jac√≥. √önete a nuestra comunidad con metodolog√≠a progresiva y entrenadores certificados. Clases para todos los niveles.",
  keywords: "CrossFit Jac√≥, gimnasio Jac√≥, BJJ Jac√≥, Brazilian Jiu-Jitsu Costa Rica, fitness Jac√≥, entrenamiento funcional, box CrossFit Puntarenas, gym comunidad",
  type: "website",
  image: "/images/logo-pretafit.jpeg"
};
---
<BaseLayout 
  {seo}
  includeFAQSchema={true}
  reviews={reviews}
>
  <Header nonce={nonce} slot="header" />

  <!-- Use Hero component -->
  <Hero />

  <!-- ================= WOD WARRIORS PROMO FUNNEL ================= -->
  <section class="py-12 event-promo-section">
    <div class="max-w-[1040px] mx-auto px-4">
      <div class="event-header">
        <div class="overline event-overline">EVENTO ESPECIAL</div>
        <h2 class="text-2xl font-black m-0 mb-2 event-title">WOD WARRIORS 2025</h2>
        <p class="text-xs text-text-muted event-description">
          <strong>Competencia de CrossFit</strong> ‚Ä¢ Exhibici√≥n de BJJ ‚Ä¢ M√∫sica en vivo<br>
          <span class="event-date">5 de Septiembre, 7:00 PM ‚Ä¢ Preta Fit Jac√≥</span>
        </p>
      </div>
      
      <!-- Countdown Timer -->
      <CountdownTimer 
        title="¬°No te quedes fuera!"
        subtitle="‚ö° NO TE LO PIERDAS ‚ö°"
        targetDay="friday"
        targetHour={19}
        timezone="America/Costa_Rica"
        eventMessage="¬°El evento ya comenz√≥! üéâ"
      />
      
      <!-- CTA Button -->
      <div class="event-cta-wrapper">
        <a href="/wodwarriors" class="inline-flex items-center gap-2 bg-brand text-white border border-brand px-4 py-[10px] rounded-full font-extrabold text-sm shadow-[0_6px_18px_rgba(255,106,42,.25)] transition-transform duration-200 cursor-pointer hover:-translate-y-px hover:shadow-[0_10px_22px_rgba(255,106,42,.32)] event-cta-btn">
          ‚ú® Ver Detalles del Evento ‚ú®
        </a>
        <p class="text-xs text-text-muted event-cta-note">
          Categor√≠as Principiante e Intermedio
        </p>
      </div>
    </div>
  </section>

  <!-- Use Disciplines component -->
  <Disciplines />

  <!-- Use Instructor component -->
  <Instructor />

  <!-- Use PlansCrossFit component -->
  <PlansCrossFit />

  <!-- Use Reviews component -->
  <Reviews />

  <!-- Use Location component -->
  <Location />

  <!-- ================= FAQ ================= -->
  <FAQ />

  <Footer slot="footer" />
</BaseLayout>

<!-- ================= LIGHTBOX ================= -->
<div id="lightbox" class="lightbox">
  <button id="lbClose" class="inline-flex items-center gap-2 bg-surface text-text border border-border px-4 py-[10px] rounded-full font-extrabold text-sm cursor-pointer transition-transform duration-200 lightbox-close">Cerrar</button>
  <!-- Lightbox image - kept as img tag since src is dynamically set by JavaScript -->
  <img id="lbImg" src="" alt="" class="lightbox-image">
</div>

<script nonce={nonce}>


</script>
