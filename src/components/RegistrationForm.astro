---
// Registration Form Component
// This component contains the full registration form that was previously in the WOD Warriors page
---

<section id="registro" class="section">
  <div class="container">
    <div class="overline">Registro</div>
    <h2 class="h2">Registro & Comunidad</h2>
    <div class="small" style="margin-bottom:10px">Participa como atleta, espectador o patrocinador. También puedes dejar tus datos para futuras competencias y membresías.</div>
    <div style="display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(340px,1fr))">
      <form id="lead-form" class="card" style="padding:16px;display:grid;gap:12px" novalidate>
        <h3 style="margin:0 0 4px;font-size:18px">Formulario de Registro</h3>
        <div id="form-success" class="small" style="display:none;background:#0f3d2b;color:#b4f6de;padding:8px 10px;border:1px solid #1d6e52;border-radius:10px">¡Registro enviado! Te contactaremos pronto.</div>
        <div id="form-error" class="small" style="display:none;background:#3d0f0f;color:#ffb8b8;padding:8px 10px;border:1px solid #6e1d1d;border-radius:10px">Revisa los campos marcados. Falta información.</div>
        <label class="small" for="name">Nombre completo</label>
        <input id="name" name="name" required placeholder="Tu nombre" />
        <label class="small" for="email">Email</label>
          <input id="email" name="email" type="email" required placeholder="tu@email.com" />
        <label class="small" for="phone">Teléfono / WhatsApp</label>
        <input id="phone" name="phone" type="tel" placeholder="+506 ..." />
        <label class="small" for="role">Interés</label>
        <select id="role" name="role" required>
          <option value="">Selecciona una opción</option>
          <option value="atleta">Competir</option>
          <option value="espectador">Asistir</option>
          <option value="patrocinador">Patrocinar</option>
          <option value="membresia">Membresía Preta Fit</option>
        </select>
        <label class="small" for="category">Categoría (si compites)</label>
        <select id="category" name="category">
          <option value="">No aplica</option>
          <option value="principiante">Principiante</option>
          <option value="intermedio">Intermedio</option>
        </select>
        <label class="small" for="message">Mensaje / Nota</label>
        <textarea id="message" name="message" rows="4" placeholder="Cuéntanos algo adicional..."></textarea>
        <label style="display:flex;gap:6px;align-items:flex-start;font-size:11px"><input type="checkbox" id="privacy" required style="margin-top:4px"> <span>Acepto recibir información de eventos y promociones</span></label>
        <button class="btn" type="submit">Enviar Registro</button>
        <p class="small" style="margin:0">Protegemos tus datos. No spam. Puedes darte de baja en cualquier momento.</p>
      </form>
      <div style="display:grid;gap:16px;align-content:start">
        <div><h3 style="margin:0 0 4px;font-size:18px">¿Por qué participar?</h3><p class="small" style="margin:0">Progresión real, ambiente de apoyo, exhibición técnica y networking con atletas de la región. Beneficios especiales para miembros potenciales.</p></div>
        <div><h3 style="margin:0 0 4px;font-size:18px">¿Eres patrocinador?</h3><p class="small" style="margin:0">Activa tu marca frente a una audiencia comprometida con salud, rendimiento y estilo de vida activo. Escríbenos para paquetes personalizados.</p></div>
        <div><h3 style="margin:0 0 4px;font-size:18px">Únete a la Comunidad</h3><p class="small" style="margin:0 0 8px">Sigue nuestro contenido, entrenamientos y próximos eventos.</p>
          <div style="display:flex;flex-wrap:wrap;gap:8px"><a class="btn secondary" href="#">Instagram</a><a class="btn secondary" href="#">WhatsApp</a><a class="btn secondary" href="#">YouTube</a></div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
/* expanded form validation */
const regForm = document.getElementById('lead-form') as HTMLFormElement | null;
if (regForm) {
  const success = document.getElementById('form-success');
  const error = document.getElementById('form-error');
  regForm.addEventListener('submit', e => {
    e.preventDefault();
    if (success) success.style.display = 'none';
    if (error) error.style.display = 'none';
    let valid = true;
    regForm.querySelectorAll('[required]').forEach(f => {
      const field = f as HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement;
      field.classList.remove('invalid');
      if (!field.value || (field.type === 'checkbox' && !(field as HTMLInputElement).checked)) {
        valid = false;
        field.classList.add('invalid');
      }
    });
    if (!valid) {
      if (error) error.style.display = 'block';
      return;
    }
    if (success) success.style.display = 'block';
    regForm.reset();
  });
}
</script>
