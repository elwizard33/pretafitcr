---
const links = [
  { href: '/', label: 'Inicio' },
  { href: '/crossfit', label: 'CrossFit' },
  { href: '/wodwarriors', label: 'WOD Warriors' },
];
---
<div class="topbar">
  <div class="container nav">
    <a class="brand" href="/"><span class="logo" aria-hidden="true"></span></a>
    <nav class="links" aria-label="Primary">
      {links.map(l => <a href={l.href}>{l.label}</a>)}
    </nav>
    <button class="mnav-btn btn secondary" aria-controls="mnav" aria-expanded="false">Menu</button>
  </div>
  <div id="mnav" class="container" style="display:none">
    <div class="card" style="padding:10px;margin:10px 0">
      <div style="display:grid;gap:10px">
        {links.map(l => <a class="btn secondary" href={l.href}>{l.label}</a>)}
      </div>
    </div>
  </div>
</div>

<script>
/* mobile nav */
const mbtn=document.querySelector('.mnav-btn'), mnav=document.getElementById('mnav');
if(mbtn && mnav) {
  mbtn.addEventListener('click',()=>{ const open=mnav.style.display!=='block'; mnav.style.display=open?'block':'none'; mbtn.setAttribute('aria-expanded', open); });
}
/* close mobile on anchor click */
document.querySelectorAll('a[href^="#"]').forEach(a=>{
  a.addEventListener('click',e=>{
    const id=a.getAttribute('href'); if(id.length>1){ e.preventDefault(); document.querySelector(id)?.scrollIntoView({behavior:'smooth'}); if(mnav){mnav.style.display='none'; mbtn.setAttribute('aria-expanded','false');}}
  });
});
/* topbar scroll state */
const tb=document.querySelector('.topbar');
const toggleScroll=()=>{ if(window.scrollY>4){tb.classList.add('is-scrolled');} else {tb.classList.remove('is-scrolled');}};
window.addEventListener('scroll',toggleScroll,{passive:true});
toggleScroll();
</script>
